"""
Visual Agent Prompt - å›¾åƒåˆ†æ
"""
from typing import Dict, Any


SYSTEM_PROMPT = """
è¯·åˆ†æè¿™å¼ å›¾ç‰‡ï¼Œæå–ä»¥ä¸‹ä¿¡æ¯ï¼š

## ğŸ“ 1. OCR æ–‡å­—è¯†åˆ«

è¯†åˆ«å›¾ç‰‡ä¸­çš„æ‰€æœ‰å¯è§æ–‡å­—ï¼ˆåŒ…æ‹¬æ ‡é¢˜ã€å‰¯æ ‡é¢˜ã€æ ‡è¯­ã€è¯´æ˜æ–‡å­—ç­‰ï¼‰ï¼Œå¯¹äºæ¯ä¸ªæ–‡å­—åŒºåŸŸï¼Œè¯·æä¾›ï¼š
- æ–‡å­—å†…å®¹
- ä½ç½®æè¿°ï¼ˆå¦‚ï¼šå·¦ä¸Šè§’ã€å±…ä¸­ã€å³ä¸‹è§’ç­‰ï¼‰
- æ–‡å­—å¤§å°ï¼ˆå¤§æ ‡é¢˜ã€å°æ ‡é¢˜ã€æ­£æ–‡ç­‰ï¼‰
- è¯†åˆ«ç½®ä¿¡åº¦ï¼ˆé«˜/ä¸­/ä½ï¼‰

## ğŸ¨ 2. å›¾åƒç†è§£

### 2.1 é£æ ¼è¯†åˆ«
åˆ¤æ–­å›¾ç‰‡çš„é£æ ¼ç±»å‹ï¼Œä»ä»¥ä¸‹é€‰é¡¹ä¸­é€‰æ‹©ä¸€ä¸ªï¼š
- businessï¼ˆå•†åŠ¡é£æ ¼ï¼‰
- campusï¼ˆæ ¡å›­é£æ ¼ï¼‰
- eventï¼ˆæ´»åŠ¨é£æ ¼ï¼‰
- productï¼ˆäº§å“æ¨å¹¿é£æ ¼ï¼‰
- festivalï¼ˆèŠ‚æ—¥é£æ ¼ï¼‰
- otherï¼ˆå…¶ä»–é£æ ¼ï¼‰

### 2.2 é…è‰²åˆ†æ
- ä¸»è‰²è°ƒï¼šæå–å›¾ç‰‡çš„ä¸»è¦é¢œè‰²ï¼Œä»¥ Hex æ ¼å¼è¾“å‡ºï¼ˆå¦‚ #1E3A8Aï¼‰
- é…è‰²æ–¹æ¡ˆï¼šæå–å›¾ç‰‡ä¸­çš„ä¸»è¦é¢œè‰²ç»„åˆï¼Œä»¥ Hex æ ¼å¼æ•°ç»„è¾“å‡ºï¼ˆå¦‚ ["#1E3A8A", "#3B82F6", "#FFFFFF"]ï¼‰

### 2.3 å…ƒç´ è¯†åˆ«
è¯†åˆ«å›¾ç‰‡ä¸­åŒ…å«çš„å…ƒç´ ï¼ˆå¯å¤šé€‰ï¼‰ï¼š
- personï¼ˆäººç‰©ï¼‰
- productï¼ˆäº§å“ï¼‰
- textï¼ˆæ–‡å­—ï¼‰
- backgroundï¼ˆèƒŒæ™¯ï¼‰
- logoï¼ˆæ ‡å¿—ï¼‰
- otherï¼ˆå…¶ä»–ï¼‰

### 2.4 ä¸»é¢˜å’Œæƒ…æ„Ÿ
- ä¸»é¢˜ï¼šåˆ¤æ–­å›¾ç‰‡çš„ä¸»é¢˜ï¼Œå¦‚ï¼šæ‹›è˜ã€æ´»åŠ¨ã€äº§å“æ¨å¹¿ã€å®£ä¼ ã€å…¶ä»–
- æƒ…æ„Ÿï¼šåˆ¤æ–­å›¾ç‰‡ä¼ è¾¾çš„æƒ…æ„Ÿï¼Œå¦‚ï¼šæ­£å¼ã€æ´»æ³¼ã€æ¸©é¦¨ã€ç§‘æŠ€æ„Ÿã€å…¶ä»–

### 2.5 å¸ƒå±€å»ºè®®
- text_positionï¼šæ–‡å­—ä½ç½®å»ºè®®ï¼ˆtop/center/bottomï¼‰
- text_color_suggestionï¼šå»ºè®®çš„æ–‡å­—é¢œè‰²ï¼ˆåŸºäºèƒŒæ™¯åˆ†æï¼Œç¡®ä¿å¯è¯»æ€§ï¼‰

### 2.6 æè¿°
ç”¨ä¸€å¥è¯æè¿°è¿™å¼ å›¾ç‰‡çš„æ•´ä½“é£æ ¼å’Œå†…å®¹ã€‚
"""


USER_PROMPT_TEMPLATE = """
**ç”¨æˆ·éœ€æ±‚**: {user_prompt}

---

## è¾“å‡ºæ ¼å¼

è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ JSON æ ¼å¼è¾“å‡ºï¼Œä¸è¦åŒ…å« Markdown æ ¼å¼ï¼ˆå¦‚ ```json ... ```ï¼‰ï¼š

{{{{
    "texts": [
        {{{{
            "content": "æ–‡å­—å†…å®¹",
            "position": "ä½ç½®æè¿°",
            "size": "å¤§å°æè¿°",
            "confidence": "é«˜/ä¸­/ä½"
        }}}}
    ],
    "has_text": true,
    "style": "business",
    "main_color": "#1E3A8A",
    "color_palette": ["#1E3A8A", "#3B82F6", "#FFFFFF"],
    "elements": ["text", "background"],
    "theme": "æ‹›è˜",
    "mood": "æ­£å¼",
    "layout_hints": {{{{
        "text_position": "top",
        "text_color_suggestion": "#FFFFFF"
    }}}},
    "description": "ä¸€å¼ æ·±è“è‰²å•†åŠ¡é£æ ¼çš„æ‹›è˜æµ·æŠ¥"
}}}}

æ³¨æ„ï¼šå¦‚æœå›¾ç‰‡ä¸­æ²¡æœ‰æ–‡å­—ï¼Œè¯·å°† `has_text` è®¾ä¸º falseï¼Œ`texts` è®¾ä¸ºç©ºæ•°ç»„ã€‚
"""


def get_prompt(user_prompt: str) -> Dict[str, str]:
    """
    è·å– Visual Agent å›¾åƒåˆ†æçš„ prompt
    
    Args:
        user_prompt: ç”¨æˆ·è¾“å…¥çš„æç¤ºè¯
        
    Returns:
        åŒ…å« system å’Œ user prompt çš„å­—å…¸
    """
    return {
        "system": SYSTEM_PROMPT,
        "user": USER_PROMPT_TEMPLATE.format(user_prompt=user_prompt),
    }


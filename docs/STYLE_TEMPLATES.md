# 海报风格模板系统文档

## 📋 概述

VibePoster 提供了一套完整的海报风格模板系统，包含 **5 种主流风格**，每种风格都有精心设计的配色方案、字体推荐、布局规则和风格偏好。

---

## 🎨 五种风格模板

### 1. Business（商务风格）

**适用场景**：企业宣传、商务会议、培训讲座、招聘海报、企业年报、产品发布会、B2B营销

**特点**：
- 专业、简洁、现代、可信赖、高效
- 情绪基调：professional
- 目标受众：business professionals, corporate clients

**配色方案**：
1. **专业蓝**
   - 主色调：#2C3E50（深蓝灰）
   - 辅助色：#3498DB（明亮蓝）
   - 强调色：#E74C3C（红色）
   - 背景色：#FFFFFF（白色）

2. **精英黑**
   - 主色调：#1A1A1A（深黑）
   - 辅助色：#FFD700（金色）
   - 强调色：#C0C0C0（银色）
   - 背景色：#F5F5F5（浅灰）

**字体推荐**：
- 标题：Source Han Sans CN, Microsoft YaHei, Arial, Helvetica
- 正文：Source Han Sans CN, Microsoft YaHei, Arial
- 字体粗细：标题 bold，副标题 medium，正文 normal

**布局规则**：
- 对齐方式：左对齐（left）
- 元素分布：平衡（balanced）
- 文字区域占比：40%
- 图片区域占比：50%

**设计原则**：
- 简洁明了，避免过多装饰
- 使用网格系统确保对齐
- 留白充足，信息层次清晰
- 色彩克制，以蓝色、灰色为主
- 字体规范，易于阅读

**推荐元素**：几何图形、图表、数据可视化、企业Logo、专业摄影

**避免元素**：卡通元素、过于鲜艳的颜色、花哨的装饰、非正式的字体

---

### 2. Campus（校园风格）

**适用场景**：社团招新、校园活动、讲座通知、运动会、文艺演出、学生会选举、社团聚会

**特点**：
- 活泼、年轻、充满活力、创意、友好
- 情绪基调：energetic
- 目标受众：students, young people

**配色方案**：
1. **青春活力**
   - 主色调：#FF6B9D（粉红）
   - 辅助色：#4ECDC4（青色）
   - 强调色：#FFE66D（黄色）
   - 背景色：#FFF8F0（米白色）

2. **清新校园**
   - 主色调：#5DADE2（天蓝）
   - 辅助色：#52BE80（绿色）
   - 强调色：#F39C12（橙色）
   - 背景色：#FFFFFF（白色）

**字体推荐**：
- 标题：Source Han Sans CN, Microsoft YaHei, PingFang SC, STHeiti
- 正文：Source Han Sans CN, Microsoft YaHei, PingFang SC
- 字体粗细：标题 heavy，副标题 bold，正文 normal

**布局规则**：
- 对齐方式：居中（center）
- 元素分布：上重（top_heavy）
- 文字区域占比：45%
- 图片区域占比：45%

**设计原则**：
- 色彩鲜明，充满活力
- 字体可适当夸张，增强表现力
- 可使用插画、手绘元素
- 布局灵活，不必过于拘泥
- 突出活动亮点和趣味性

**推荐元素**：插画、图标、几何装饰、手写字体、贴纸元素、波浪线

**避免元素**：过于严肃的设计、单调的配色、过小的字体

---

### 3. Event（活动风格）

**适用场景**：音乐会、演唱会、艺术展览、派对活动、促销活动、新品发布、体育赛事

**特点**：
- 醒目、动感、激情、吸引注意、时尚
- 情绪基调：exciting
- 目标受众：event attendees, general public

**配色方案**：
1. **动感红**
   - 主色调：#E74C3C（鲜红）
   - 辅助色：#F39C12（橙色）
   - 强调色：#FFFFFF（白色）
   - 背景色：#1A1A1A（深色）

2. **霓虹夜**
   - 主色调：#9B59B6（紫色）
   - 辅助色：#E91E63（粉红）
   - 强调色：#00BCD4（青色）
   - 背景色：#000000（黑色）

**字体推荐**：
- 标题：Impact, Source Han Sans CN, Arial Black, Microsoft YaHei
- 正文：Source Han Sans CN, Microsoft YaHei, Arial
- 字体粗细：标题 black，副标题 bold，正文 medium

**布局规则**：
- 对齐方式：居中（center）
- 元素分布：平衡（balanced）
- 文字区域占比：35%
- 图片区域占比：55%

**设计原则**：
- 大胆使用对比色
- 标题要够大够醒目
- 可使用倾斜、错位等动感设计
- 背景可使用大图或渐变
- 突出时间、地点等关键信息

**推荐元素**：大字体、渐变、光效、几何图形、动态线条、大图背景

**避免元素**：过于素雅的设计、小字体、过多文字

---

### 4. Product（产品推广）

**适用场景**：产品广告、电商促销、新品发布、品牌宣传、产品介绍、限时优惠、特价促销

**特点**：
- 突出产品、清晰、有说服力、高端、吸引购买
- 情绪基调：persuasive
- 目标受众：consumers, potential buyers

**配色方案**：
1. **现代简约**
   - 主色调：#000000（黑色）
   - 辅助色：#FFFFFF（白色）
   - 强调色：#FF4444（红色）
   - 背景色：#F8F8F8（浅灰）

2. **科技蓝**
   - 主色调：#0066FF（科技蓝）
   - 辅助色：#00CCFF（浅蓝）
   - 强调色：#FFFFFF（白色）
   - 背景色：#FFFFFF（白色）

**字体推荐**：
- 标题：Source Han Sans CN, Microsoft YaHei, Helvetica, Arial
- 正文：Source Han Sans CN, Microsoft YaHei, Arial
- 字体粗细：标题 bold，副标题 medium，正文 normal

**布局规则**：
- 对齐方式：居中（center）
- 元素分布：平衡（balanced）
- 文字区域占比：30%
- 图片区域占比：60%

**设计原则**：
- 产品图片要清晰、高质量
- 突出产品特点和卖点
- 使用简洁有力的文案
- 留白充足，聚焦产品
- 包含明确的行动号召（CTA）

**推荐元素**：产品高清图、特性图标、价格标签、促销徽章、简洁背景

**避免元素**：杂乱的背景、过多文字、低质量图片、不相关的装饰

---

### 5. Festival（节日风格）

**适用场景**：春节祝福、中秋节、圣诞节、元旦、国庆节、情人节、端午节

**特点**：
- 喜庆、温馨、节日氛围、团圆、祝福
- 情绪基调：festive
- 目标受众：general public, families

**配色方案**：
1. **中国红**
   - 主色调：#DC143C（中国红）
   - 辅助色：#FFD700（金色）
   - 强调色：#FFEB3B（黄色）
   - 背景色：#FFF8E1（米黄）

2. **圣诞绿**
   - 主色调：#165E3F（深绿）
   - 辅助色：#C41E3A（圣诞红）
   - 强调色：#FFD700（金色）
   - 背景色：#F5F5DC（米色）

**字体推荐**：
- 标题：Source Han Serif CN, STKaiti, Microsoft YaHei, SimSun
- 正文：Source Han Sans CN, Microsoft YaHei, SimHei
- 字体粗细：标题 heavy，副标题 bold，正文 normal

**布局规则**：
- 对齐方式：居中（center）
- 元素分布：平衡（balanced）
- 文字区域占比：40%
- 图片区域占比：50%

**设计原则**：
- 使用节日相关的配色和元素
- 营造温馨、喜庆的氛围
- 可使用传统纹样和装饰
- 文字表达祝福和节日主题
- 整体设计要有节日感

**推荐元素**：节日元素（灯笼、烟花、雪花等）、传统纹样、祝福语、节日食品、装饰边框

**避免元素**：冷色调、严肃的设计、商务化元素

---

## 🔧 使用方式

### 1. API 调用

#### 获取所有风格模板列表

```bash
GET /api/styles
```

**响应示例**：
```json
{
  "success": true,
  "data": {
    "templates": [
      {
        "id": "business",
        "name": "business",
        "display_name": "商务风格",
        "description": "专业、简洁、现代的商务风格...",
        "use_cases": ["企业宣传", "商务会议", ...],
        "example_prompts": ["2024年度企业峰会", ...]
      },
      ...
    ],
    "default_template_id": "business"
  },
  "message": "风格模板列表获取成功"
}
```

#### 获取指定风格模板详情

```bash
GET /api/styles/{template_id}
```

**响应示例**：
```json
{
  "success": true,
  "data": {
    "id": "business",
    "name": "business",
    "display_name": "商务风格",
    "description": "...",
    "color_schemes": [...],
    "font_recommendation": {...},
    "layout_rule": {...},
    "style_preference": {...},
    "use_cases": [...],
    "example_prompts": [...]
  },
  "message": "风格模板详情获取成功"
}
```

#### 生成海报时指定风格模板

```bash
POST /api/generate_multimodal
Content-Type: multipart/form-data

prompt: "2024年度企业峰会"
canvas_width: 1080
canvas_height: 1920
style_template: "business"  # 可选，不指定则自动匹配
```

### 2. 智能匹配

如果不指定 `style_template` 参数，系统会根据用户输入的 `prompt` **智能匹配**最合适的风格模板。

**匹配逻辑**：
1. 检查 prompt 中是否包含模板的关键词
2. 检查 prompt 中是否包含使用场景
3. 检查 prompt 是否与示例提示词相似
4. 根据意图类型进行匹配

**示例**：
- 输入："社团招新季来啦" → 自动匹配 **Campus（校园风格）**
- 输入："新款手机震撼上市" → 自动匹配 **Product（产品推广）**
- 输入："摇滚音乐节" → 自动匹配 **Event（活动风格）**
- 输入："春节快乐，龙年大吉" → 自动匹配 **Festival（节日风格）**

---

## 🏗️ 架构设计

### 核心模块

```
backend/engine/app/templates/
├── __init__.py          # 模块导出
├── models.py            # 数据模型（Pydantic Schema）
├── templates.py         # 5种风格模板定义
└── manager.py           # 模板管理器（加载、选择、匹配）
```

### 数据模型

```python
# 配色方案
class ColorScheme(BaseModel):
    name: str
    primary: str
    secondary: str
    accent: str
    background: str
    text_primary: str
    text_secondary: str

# 字体推荐
class FontRecommendation(BaseModel):
    title_fonts: List[str]
    body_fonts: List[str]
    font_size_range: Dict[str, Dict[str, int]]
    font_weight: Dict[str, str]

# 布局规则
class LayoutRule(BaseModel):
    alignment: str
    spacing: Dict[str, int]
    element_distribution: str
    text_area_ratio: float
    image_area_ratio: float
    preferred_positions: Dict[str, str]

# 风格偏好
class StylePreference(BaseModel):
    keywords: List[str]
    mood: str
    target_audience: str
    design_principles: List[str]
    avoid_elements: List[str]
    recommended_elements: List[str]

# 完整的风格模板
class StyleTemplate(BaseModel):
    id: str
    name: str
    display_name: str
    description: str
    color_schemes: List[ColorScheme]
    font_recommendation: FontRecommendation
    layout_rule: LayoutRule
    style_preference: StylePreference
    use_cases: List[str]
    example_prompts: List[str]
```

### 集成流程

```
用户请求
  ↓
API 路由（接收 style_template 参数）
  ↓
Service 层（传递 style_template 到 workflow）
  ↓
Planner Agent
  ├─ 手动指定风格：使用指定的模板
  └─ 自动匹配：智能选择最合适的模板
  ↓
将风格模板上下文注入到 Prompt 中
  ↓
LLM 根据风格模板生成设计简报
  ↓
设计简报包含风格模板信息
  ↓
后续 Agent 使用设计简报生成海报
```

---

## 🎯 特点与优势

### 1. **解耦性强**
- 模板系统独立于 Agent 逻辑
- 可以轻松添加新的风格模板
- 不影响现有代码

### 2. **灵活配置**
- 支持手动指定风格
- 支持智能自动匹配
- 每种风格都有多个配色方案可选

### 3. **人性化设计**
- 风格分类清晰，符合常见使用场景
- 配色方案经过精心设计
- 提供详细的设计原则和推荐元素

### 4. **架构融合**
- 完美融入现有的 4-Agent 架构
- 通过 Prompt 注入实现风格控制
- 不破坏原有的工作流

### 5. **可扩展性**
- 易于添加新的风格模板
- 易于调整现有模板的参数
- 支持自定义配色方案

---

## 📊 使用示例

### Python 代码示例

```python
from app.templates.manager import template_manager

# 获取所有模板
templates = template_manager.list_templates()

# 获取指定模板
business_template = template_manager.get_template("business")

# 智能匹配模板
matched_template = template_manager.smart_match_template(
    user_prompt="社团招新季来啦",
    intent="campus",
    keywords=["活泼", "年轻"]
)

# 获取模板的 Prompt 上下文
context = matched_template.to_prompt_context()
```

### 前端集成示例

```typescript
// 获取风格模板列表
const response = await axios.get('/api/styles');
const templates = response.data.data.templates;

// 生成海报时指定风格
const formData = new FormData();
formData.append('prompt', '2024年度企业峰会');
formData.append('canvas_width', '1080');
formData.append('canvas_height', '1920');
formData.append('style_template', 'business');  // 指定商务风格

const result = await axios.post('/api/generate_multimodal', formData);
```

---

## 🔮 未来扩展

1. **更多风格模板**
   - 科技风格（Technology）
   - 复古风格（Vintage）
   - 极简风格（Minimalist）
   - 艺术风格（Artistic）

2. **用户自定义模板**
   - 允许用户保存自己的风格偏好
   - 支持模板的导入/导出

3. **风格混合**
   - 支持多种风格的混合使用
   - 自动调整配色和布局

4. **A/B 测试**
   - 同时生成多种风格的海报
   - 让用户选择最喜欢的

---

**最后更新**: 2025-01-02
**版本**: 1.0.0

